a = c("id","member_id","loan_amnt","funded_amnt","funded_amnt_inv","term","int_rate","installment","grade","sub_grade","emp_title","emp_length","home_ownership","annual_inc","verification_status","issue_d","loan_status","pymnt_plan","url","desc","purpose","title","zip_code","addr_state","dti","delinq_2yrs","earliest_cr_line","fico_range_low","fico_range_high","inq_last_6mths","mths_since_last_delinq","mths_since_last_record","open_acc","pub_rec","revol_bal","revol_util","total_acc","initial_list_status","out_prncp","out_prncp_inv","total_pymnt","total_pymnt_inv","total_rec_prncp","total_rec_int","total_rec_late_fee","recoveries","collection_recovery_fee","last_pymnt_d","last_pymnt_amnt","next_pymnt_d","last_credit_pull_d","last_fico_range_high","last_fico_range_low","collections_12_mths_ex_med","mths_since_last_major_derog","policy_code")
install.packages('utils')
install.packages("utils")
library("base64enc", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:base64enc", unload=TRUE)
detach("package:datasets", unload=TRUE)
detach("package:graphics", unload=TRUE)
detach("package:grDevices", unload=TRUE)
detach("package:methods", unload=TRUE)
detach("package:stats", unload=TRUE)
detach("package:utils", unload=TRUE)
install.packages('utils')
pb <- winProgressBar(title="Example progress bar", label="0% done", min=1, max=length(range), initial=1)
?winProgressBar
??winProgressBar
?winProgressBar
detach("package:utils", unload=TRUE)
detach("package:stats", unload=TRUE)
library("utils", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
?winProgressBar
detach("package:utils", unload=TRUE)
detach("package:methods", unload=TRUE)
library("utils", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:utils", unload=TRUE)
library("utils", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
library("shiny", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
?withProgress
devtools::install_github("rstudio/shiny-incubator")
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
devtools::install_github("rstudio/shiny-incubator")
library("shinyIncubator", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
detach("package:shinyIncubator", unload=TRUE)
library("shiny", lib.loc="/Library/Frameworks/R.framework/Versions/3.2/Resources/library")
?withProgress
?updateNumericInput
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
detail = paste0("Running period: ",i)
detail = paste0("Running period: ", i)
i = i + 1
incProgress(i/length(range))
detail = paste0("Running period: ", i)
i = 0
paste0("Running period: ", i)
shiny::runApp('Documents/NYCDS/Project2')
incProgress(i/length(range)/2, detail = paste0("Running period: ", i))
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
install.packages('shinythemes')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?shinytheme
?navbarPage
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?shinythemes
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
runApp(
# A very basic navbar page with different themes
shinyApp(
ui = navbarPage("Default theme",
tabPanel("Plot", "Plot tab contents..."),
navbarMenu("More",
tabPanel("Summary", "Summary tab contents..."),
tabPanel("Table", "Table tab contents...")
)
),
server = function(input, output) { }
)
shinyApp(
ui = navbarPage("United",
theme = shinytheme("united"),
tabPanel("Plot", "Plot tab contents..."),
navbarMenu("More",
tabPanel("Summary", "Summary tab contents..."),
tabPanel("Table", "Table tab contents...")
)
),
server = function(input, output) { }
)
shinyApp(
ui = navbarPage("Cerulean",
theme = shinytheme("cerulean"),
tabPanel("Plot", "Plot tab contents..."),
navbarMenu("More",
tabPanel("Summary", "Summary tab contents..."),
tabPanel("Table", "Table tab contents...")
)
),
server = function(input, output) { }
)
runApp(
# A more complicated app with the flatly theme
shinyApp(
ui = fluidPage(
theme = shinytheme("flatly"),
titlePanel("Tabsets"),
sidebarLayout(
sidebarPanel(
radioButtons("dist", "Distribution type:",
c("Normal" = "norm",
"Uniform" = "unif",
"Log-normal" = "lnorm",
"Exponential" = "exp")),
br(),
sliderInput("n", "Number of observations:",
value = 500, min = 1, max = 1000)
),
mainPanel(
tabsetPanel(type = "tabs",
tabPanel("Plot", plotOutput("plot")),
tabPanel("Summary", verbatimTextOutput("summary")),
tabPanel("Table", tableOutput("table"))
)
)
)
),
server = function(input, output) {
data <- reactive({
dist <- switch(input$dist,
norm = rnorm,
unif = runif,
lnorm = rlnorm,
exp = rexp,
rnorm)
dist(input$n)
})
output$plot <- renderPlot({
dist <- input$dist
n <- input$n
hist(data(), main=paste('r', dist, '(', n, ')', sep=''))
})
output$summary <- renderPrint({
summary(data())
})
output$table <- renderTable({
data.frame(x=data())
})
}
)
)
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?navbarPage
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?actionButton
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?selectInput
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
?wellPanel
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/Project2')
shiny::runApp('Documents/NYCDS/bootcamp003_student/Project2-Shiny/JF')
shiny::runApp('Documents/NYCDS/bootcamp003_student/Project2-Shiny/JF')
library(data.table)
library(h2o)
library(dplyr)
localH2O = h2o.init(nthreads = -1, max_mem_size = '6g')
cat("reading the train and test data (with data.table) \n")
train <- fread("../data/train.csv",stringsAsFactors = T)
setwd("~/Documents/NYCDS/Project4/KaggleProject")
cat("reading the train and test data (with data.table) \n")
train <- fread("../data/train.csv",stringsAsFactors = T)
test  <- fread("../data/test.csv",stringsAsFactors = T)
store <- fread("data/store.csv",stringsAsFactors = T)
train <- train[Sales > 0,]  ## We are not judged on 0 sales records in test set
train <- merge(train,store,by="Store")
test <- merge(test,store,by="Store")
train[,Date:=as.Date(Date)]
test[,Date:=as.Date(Date)]
train[,Store:=as.factor(as.numeric(Store))]
test[,Store:=as.factor(as.numeric(Store))]
train[,logSales:=log1p(Sales)]
trainHex<-as.h2o(train)
features<-colnames(train)[!(colnames(train) %in% c( "V1","Id","Date","Sales","logSales","Customers"))]
trees = 2
depth = 60
rfHex <- h2o.randomForest(x=features,
y="logSales",
ntrees = trees,
max_depth = depth,
nbins_cats = 1115, ## allow it to fit store ID
training_frame=trainHex)
rmse = function(predictions, targets) {
return(((predictions - targets)/targets) ** 2)
}
train_pred = as.data.frame(h2o.predict(rfHex,trainHex))
train_pred <- expm1(train_pred[,1])
train_pred = train_pred
train$pred = train_pred
train$rmse = rmse(train_pred, train$Sales)
train2 = filter(train, month %in% c(8,9))
(total_rmse = sqrt(sum(train$rmse)/nrow(train)))
(partial_rmse = sqrt(sum(train2$rmse)/nrow(train2)))
sumup = as.data.frame(rbind(summary(train_pred), summary(train$Sales), summary(train2$pred), summary(train2$Sales)))
sumup$sd = c(round(sd(train_pred)), round(sd(train$Sales)), round(sd(train2$pred)), round(sd(train2$Sales)))
sumup
varimps = data.frame(h2o.varimp(rfHex))
varimps
trees = 50
depth = 60
rfHex <- h2o.randomForest(x=features,
y="logSales",
ntrees = trees,
max_depth = depth,
nbins_cats = 1115, ## allow it to fit store ID
training_frame=trainHex)
summary(rfHex)
